# ContainerStacks

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-20232A?logo=react&logoColor=61DAFB)](https://reactjs.org/)
[![Node.js](https://img.shields.io/badge/Node.js-43853D?logo=node.js&logoColor=white)](https://nodejs.org/)

ContainerStacks is an open-source Container-as-a-Service (CaaS) platform that enables service providers to offer comprehensive Docker container hosting, management, and orchestration services. It includes built-in billing, monitoring, collaboration features, and supports multi-tenant environments with white-label capabilities.

## üíù Support Our Work
If you find my work helpful, consider supporting me:

[![PayPal](https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/donate/?hosted_button_id=TEY7YEJC8X5HW)

## üöÄ Features

- **Container Management**: Deploy, scale, and monitor Docker containers with ease
- **VPS Hosting**: Integrated VPS management with reseller markup pricing
- **Multi-Tenancy**: Organization-based access control and resource quotas
- **Billing & Wallet**: PayPal-integrated billing with account wallets and invoices
- **Monitoring & Logs**: Real-time metrics, performance insights, and log management
- **Marketplace**: Pre-built applications and custom image registry
- **Collaboration**: Team management, permissions, and shared workspaces
- **Admin Panel**: Platform configuration, user management, and system settings
- **Support System**: Ticket-based support with email notifications
- **Backup & Restore**: Automated backups with encryption and point-in-time recovery

## üõ†Ô∏è Tech Stack

### Frontend
- **React 18** with TypeScript
- **Vite** for fast development and building
- **Tailwind CSS** for styling
- **React Query** for data fetching
- **React Router** for navigation

### Backend
- **Node.js 20** with Express.js
- **TypeScript** for type safety
- **PostgreSQL** (migrated from Supabase) with Row Level Security (RLS)
- **Redis** for caching and Bull queues
- **InfluxDB** for metrics storage

### Integrations
- **PayPal SDK** for payment processing
- **SMTP2GO** for email notifications
- **Linode/Akamai API** for VPS provisioning
- **Docker Engine & Kubernetes** for container orchestration

## üìã Prerequisites

- **Node.js** 20.x or higher
- **npm** or **yarn**
- **PostgreSQL** database
- **Redis** server
- **InfluxDB** (optional for metrics)

## Example Images
<img width="1909" height="918" alt="image" src="https://github.com/user-attachments/assets/684ffc14-ff53-49bb-98d9-765d3c5969f1" />
<img width="1917" height="919" alt="image" src="https://github.com/user-attachments/assets/665e936c-066e-4d6f-9550-af0ad6b25a55" />
<img width="1912" height="918" alt="image" src="https://github.com/user-attachments/assets/8e64457e-b042-490c-872f-840b7db00de3" />
<img width="1914" height="920" alt="image" src="https://github.com/user-attachments/assets/9b34eec4-94a8-47ea-a6c8-81fb67fb5a9e" />
<img width="1917" height="918" alt="image" src="https://github.com/user-attachments/assets/391f2434-b6e1-4498-aba9-35d4a928dd14" />
<img width="1903" height="910" alt="image" src="https://github.com/user-attachments/assets/fc1f1e1d-599a-42d9-af0e-ac9a7f8a7631" />
<img width="1907" height="919" alt="image" src="https://github.com/user-attachments/assets/892104d2-83c9-4ea8-9702-26ff746d39d5" />
<img width="1917" height="922" alt="image" src="https://github.com/user-attachments/assets/08da58b7-14d0-4255-866c-090b47f4ad31" />
<img width="1895" height="920" alt="image" src="https://github.com/user-attachments/assets/7214027f-381d-4cd8-8910-926df9f70180" />
<img width="1903" height="916" alt="image" src="https://github.com/user-attachments/assets/44e76532-ce8b-4384-ac16-e4b9be8afd78" />
<img width="1906" height="921" alt="image" src="https://github.com/user-attachments/assets/3bac1630-ab05-465a-82f3-55eb273ae1cc" />
<img width="1910" height="918" alt="image" src="https://github.com/user-attachments/assets/051f20a9-e034-44be-a10f-d21ede872efd" />
<img width="1918" height="917" alt="image" src="https://github.com/user-attachments/assets/7a0df052-d65b-4400-9d8d-10919da674c9" />
<img width="1911" height="917" alt="image" src="https://github.com/user-attachments/assets/dc8bce55-bcdd-4f78-92c5-595a7f54f5bb" />
<img width="1906" height="916" alt="image" src="https://github.com/user-attachments/assets/c0083700-52e0-48f6-af6a-23bd5c61068b" />
<img width="1908" height="919" alt="image" src="https://github.com/user-attachments/assets/34ba43ea-8559-46e7-9742-d2df35cf5d92" />
<img width="1911" height="920" alt="image" src="https://github.com/user-attachments/assets/43fb6890-ba5a-4dd5-8d5a-69dc1240d211" />
<img width="1902" height="915" alt="image" src="https://github.com/user-attachments/assets/1144f534-e56a-4c48-abc2-48626589cef8" />
<img width="1907" height="918" alt="image" src="https://github.com/user-attachments/assets/6dfb616e-e807-491a-8f1a-d1e46c28a068" />
<img width="1914" height="917" alt="image" src="https://github.com/user-attachments/assets/0c424865-1689-4e81-8a0e-0d05173b54c4" />
<img width="1910" height="918" alt="image" src="https://github.com/user-attachments/assets/236b424d-5fbd-410e-844d-9fde438f5bb8" />
<img width="1903" height="917" alt="image" src="https://github.com/user-attachments/assets/7992012f-daf4-49bd-8d4d-764371ae1af4" />
<img width="1909" height="916" alt="image" src="https://github.com/user-attachments/assets/f041b85f-8820-493a-a501-d99cf78047ce" />
<img width="1906" height="919" alt="image" src="https://github.com/user-attachments/assets/1b3b1e8a-9377-47eb-a458-0fea0c497e8f" />
<img width="1908" height="914" alt="image" src="https://github.com/user-attachments/assets/d713d86e-3ad2-4467-9776-6b1411059279" />
<img width="1908" height="916" alt="image" src="https://github.com/user-attachments/assets/f7e11be1-0249-42d9-a857-6128f4bedce2" />
<img width="1910" height="916" alt="image" src="https://github.com/user-attachments/assets/f64c5ca0-e021-45ab-94c4-f55c4f0ad9f9" />


## üèóÔ∏è Setup & Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/skyvps360/containerstacks
   cd containerstacks
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**

   Create a `.env` file in the root directory (you can copy `.env.example` with `cp .env.example .env`) and update values as needed. Key variables from `.env.example`:

    ```env
   # App
   NODE_ENV=development
   PORT=3001
   CLIENT_URL=http://localhost:5173
   VITE_API_URL=http://localhost:3001/api
   JWT_SECRET=your-super-secret-jwt-key-here
   JWT_EXPIRES_IN=7d

   # PostgreSQL
   DATABASE_URL=postgresql://postgres:postgres@localhost:5432/containerstacks
   # For Neon/Cloud Postgres:
   # DATABASE_URL=postgresql://username:password@ep-example.us-east-1.aws.neon.tech/containerstacks?sslmode=require

   # PayPal
   PAYPAL_CLIENT_ID=your-paypal-client-id
   PAYPAL_CLIENT_SECRET=your-paypal-client-secret
   PAYPAL_MODE=sandbox

   # SMTP2GO Email
   SMTP2GO_API_KEY=your-smtp2go-api-key
   SMTP2GO_USERNAME=your-smtp2go-username
   SMTP2GO_PASSWORD=your-smtp2go-password
   FROM_EMAIL=noreply@containerstacks.com
   FROM_NAME=ContainerStacks

   # Linode (VPS)
   LINODE_API_TOKEN=your-linode-api-token
   LINODE_API_URL=https://api.linode.com/v4

   # Optional: DigitalOcean
   DIGITALOCEAN_API_TOKEN=your-digitalocean-api-token

   # Docker
   DOCKER_HOST=unix:///var/run/docker.sock
   DOCKER_REGISTRY_URL=registry.containerstacks.com

   # Redis
   REDIS_URL=redis://localhost:6379
   REDIS_PASSWORD=

   # Encryption for API keys
   ENCRYPTION_KEY=your-32-character-encryption-key

   # Rate limiting
   RATE_LIMIT_WINDOW_MS=900000
   RATE_LIMIT_MAX_REQUESTS=100

   # Uploads
   MAX_FILE_SIZE=10485760
   UPLOAD_PATH=./uploads

   # Metrics (optional)
   INFLUXDB_URL=http://localhost:8086
   INFLUXDB_TOKEN=your-influxdb-token
   INFLUXDB_ORG=containerstacks
   INFLUXDB_BUCKET=metrics

   # Backups
   BACKUP_STORAGE_PROVIDER=local
   BACKUP_RETENTION_DAYS=30
   ```

5. **Set up the database**
   - Run migrations from `migrations/` or use the provided scripts in `scripts/`
   - Ensure Row Level Security policies are applied as per the architecture docs

6. **Start the development servers**
   ```bash
   npm run dev  # Starts both client (Vite) and server (Nodemon)
   ```

   Or start them separately:
   ```bash
   npm run client:dev  # Frontend only
   npm run server:dev  # Backend only
   ```

7. **Access the application**
   Open [http://localhost:5173](http://localhost:5173) in your browser

## üéØ Usage

### User Roles
- **Service Provider Admin**: Full platform configuration and billing management
- **Organization Admin**: Manage organization users, billing, and resources
- **Developer**: Deploy containers, manage applications, and access logs
- **Collaborator**: Limited access to specific projects and resources

### Core Workflows
1. **Container Deployment**: Select from marketplace or upload custom images
2. **VPS Provisioning**: Create instances from integrated cloud providers
3. **Billing Management**: Add funds via PayPal and track usage
4. **Monitoring**: View metrics, logs, and set up alerts
5. **Collaboration**: Invite team members and manage permissions

## üìö Documentation

- **[Technical Architecture](./.trae/documents/ContainerStacks_Technical_Architecture.md)**: Detailed system design and API specifications
- **[Product Requirements](./.trae/documents/ContainerStacks_PRD.md)**: Feature descriptions and user flows
- **[Windsurf Rules](./.windsurf/rules.json)**: Development guidelines for the project
- **[Trae Project Rules](./.trae/rules/project_rules.md)**: IDE automation and workflow conventions

## üö¶ Development

### Available Scripts
- `npm run dev` - Start both frontend and backend (uses `concurrently`)
- `npm run client:dev` - Start frontend only
- `npm run server:dev` - Start backend only
- `npm run build` - Build for production
- `npm run lint` - Run ESLint
- `npm run check` - Run TypeScript checks
- `npm run kill-ports` - Free ports `3001` and `5173` if conflicts occur
- `npm run seed:admin` - Seed an initial admin user

### Ports & Preview
- Frontend serves at `http://localhost:5173`
- Backend runs on `http://localhost:3001` with API under `http://localhost:3001/api`
- If a port is in use (`EADDRINUSE`), run `npm run kill-ports` and restart `npm run dev`

### Admin & Seeding
- To quickly access the Admin Panel, run `npm run seed:admin` to create an initial admin user (see script in `scripts/seed-admin.js`).
- Configure provider settings and allowed regions in the Admin Panel. If no specific Linode regions are configured, the UI falls back to showing all available regions when a valid `LINODE_API_TOKEN` is present.

### Code Guidelines
- Use functional React components with hooks
- Follow the data model in architecture docs for database schemas
- Maintain TypeScript strictness and RLS for security
- Update documentation for feature changes

### Troubleshooting
- Vite loads but API fails: confirm `PORT=3001` and `VITE_API_URL=http://localhost:3001/api` in `.env`
- Region dropdown empty: verify `LINODE_API_TOKEN`, provider configuration, and network connectivity
- Port conflicts: use `npm run kill-ports` before `npm run dev`
- Missing table errors: ensure migrations are applied and review server logs

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üÜò Support

For support, create a ticket through the in-app support system or refer to the [documentation](#documentation).

---

‚≠êÔ∏è From [skyvps360](https://github.com/skyvps360) | **Made with ‚ù§Ô∏è for the container orchestration community**

